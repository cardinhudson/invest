<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Op&#xE7;&#xF5;es B3 - Bovespa - lista, pesquisa e cota&#xE7;&#xF5;es de CALLs e PUTs</title><meta name="description" content="A melhor pesquisa de opções do Brasil. Totalmente gratuita."><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/css/legacy-bundle-with-menu.css?v=NT5_5HWsxWK_PV1l_FGiDbWWEyg"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-130714908-1"></script><script>function paramIsNotUtm(param){return param.slice(0,4)!=='utm_';}
window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());var OPCOESNETBR_GA_ID='UA-130714908-1';gtag('config',OPCOESNETBR_GA_ID,{'send_page_view':false});gtag('event','page_view',{'event_callback':function(){if(history&&history.replaceState&&location.search){var params=location.search.slice(1).split('&');var newParams=params.filter(paramIsNotUtm);if(newParams.length<params.length){var search=newParams.length?'?'+newParams.join('&'):'';var url=location.pathname+search+location.hash;history.replaceState(null,null,url);}}}});</script><script>var __displayUrl__='https://opcoes.net.br/opcoes2/bovespa';</script><script src="https://www.gstatic.com/charts/loader.js"></script><script src="/js/common-bundle-before.js?v=cWax-Y6oBeONt4YHHyi9jJUXLm8"></script><script>localforage.config({name:'opcoesnetbr'});</script><link rel="stylesheet" href="/css/datatables.min.css?v=20260105"><link rel="stylesheet" href="/css/grade.css"></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="/v1">Opções.Net.Br</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-center"><li class="menu-item dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Ações <b class="caret"></b></a><ul class="dropdown-menu"><li class="menu-item"><a href="/acoes">Ações e volatilidades</a></li><li class="menu-item"><a href="/resumo/2020">Resumo de 2020</a></li><li class="menu-item"><a href="/resumo/2021">Resumo de 2021</a></li><li class="menu-item"><a href="/resumo/2022">Resumo de 2022</a></li><li class="menu-item"><a href="/resumo/2023">Resumo de 2023</a></li><li class="menu-item"><a href="/resumo/2024">Resumo de 2024</a></li><li class="menu-item"><a href="/resumo/2025">Resumo de 2025</a></li><li class="menu-item"><a href="/acoes/variacao-diaria">Variação diária</a></li><li class="menu-item"><a href="/acoes/variacao-mensal">Variação mensal</a></li><li class="menu-item"><a href="/acoes/variacao-anual">Variação anual</a></li><li class="menu-item"><a href="/acoes/estudo-variacao">Variação em N pregões</a></li></ul></li><li><a title="Calculadora Black–Scholes" href="/calculadora-Black-Scholes">Calc<span class="hidden-sm hidden-md"> B&S</span></a></li><li class="menu-item dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Educa<span class="hidden-sm hidden-md">cional</span> <b class="caret"></b></a><ul class="dropdown-menu"><li class="menu-item"><a href="/documentarios">Documentários</a></li><li class="menu-item"><a href="/filmes">Filmes</a></li><li class="menu-item"><a href="/livros">Livros</a></li><li class="menu-item"><a href="/series">Séries</a></li></ul></li><li class="menu-item dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="/opcoes/bovespa">Opções <b class="caret"></b></a><ul class="dropdown-menu"><li class="menu-item"><a href="/opcoes2/bovespa">Grade de opções - antiga</a></li><li class="menu-item"><a href="/opcoes/bovespa">Grade de opções - tempo real</a></li><li class="menu-item"><a href="/estudos/liquidez/opcoes">Liquidez nas opções</a></li><li class="menu-item"><a href="/matriz-opcoes-strike-x-vencimento">Matriz de opções</a></li><li class="menu-item"><a href="/opcoes/pozinhos/estatisticas/maiores-valorizacoes/por-ativo/grafico">Pozinhos - maiores valorizações</a></li><li class="menu-item"><a href="/opcoes/pozinhos">Pozinhos de todos ativos</a></li><li class="menu-item"><a href="/opcoes/skew-curva-de-volatilidade-implicita">Skew, negócios e volume</a></li><li class="menu-item"><a href="/opcoes/bovespa/vencimentos-longos">Vencimentos longos</a></li></ul></li><li><a href="/opcoes/estrategias">Simula<span class="hidden-sm">dor</span></a></li><li class="menu-item dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Vol<span class="hidden-sm hidden-md hidden-lg">atilidade</span> impl<span class="hidden-sm hidden-md">ícita</span> <b class="caret"></b></a><ul class="dropdown-menu"><li class="menu-item"><a href="/historico/volatilidade-implicita">Histórico de vol. impl.</a></li><li class="menu-item"><a href="/opcoes/skew-curva-de-volatilidade-implicita">Skew / Curva de vol. impl.</a></li><li class="menu-item"><a href="/visao-3d/volatilidade-implicita/PETR4">Visão 3d da vol. implícita</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href="/v1/login?ReturnUrl=%2Fopcoes2%2Fbovespa">Entrar</a></li><li><a href="/Account/Register?ReturnUrl=%2Fopcoes2%2Fbovespa">Cadastrar-se</a></li></ul>;</div></div></nav><div id="divmiddle" class="padding-adjust"><script>function acaoChanged(select){var acao=$(select).val();acaoUpdated(acao);var newUrl='/opcoes2/bovespa/'+acao;var newTitle='Opções '+acao+' - CALLs e PUTs - lista, pesquisa e cotações';history.pushState({idAcao:acao},newTitle,newUrl);document.title=newTitle;updateGrid($('.modal-title'),false,true);if(typeof gtag!=='undefined'){gtag('config',OPCOESNETBR_GA_ID,{'page_path':newUrl});}}
function acaoUpdated(acao){}
window.onpopstate=function(event){if(history.state&&history.state.idAcao){$('select[name="IdAcao"]').val(history.state.idAcao);document.title='Opções '+history.state.idAcao+' - lista, pesquisa e cotações';}else{$('select[name="IdAcao"]').val('');document.title='Opções de ações B3 - Bovespa - lista, pesquisa e cotações';}
clearCotacao();quotesSrvc.setNeededQuotes(cotAcaoSubscription,cotAcaoSubscription.getNeededQuotes());updateGrid($('.modal-title'),false,true);};</script><div class="modal-header"><div class="modal-title"><fieldset class="fSetAtivoBase" style="float:left;width:600px;margin-right:10px"><legend>Ativo base</legend><span> Lista </span> <select name="IdLista"><option value="BA" data-load="false" data-acoes="ABCB4,BBAS3,BBDC3,BBDC4,BBTG11,BIDI11,BPAC11,BPAN4,BRSR6,ITSA4,ITUB3,ITUB4,SANB11">Bancos</option><option value="BD" data-load="false" data-acoes="A1MD34,AAPL34,AMZO34,AURA33,BABA34,BERK34,CHVX34,COCA34,E1MR34,EXXO34,GMCO34,GOGL34,GSGI34,INBR32,ITLC34,JBSS32,JNJB34,JPMC34,LILY34,M1TA34,MCDC34,MELI34,MSFT34,N1VO34,NFLX34,NVDC34,OXYP34,P1GR34,PAGS34,PYPL34,RIOT34,ROXO34,SIMN34,TMOS34,TSLA34,TSMC34,VERZ34,VISA34,WALM34,XPBR31">BDRs</option><option value="EL" data-load="false" data-acoes="AERI3,AESB3,ALUP11,CESP6,CLSC3,CMIG4,CPFE3,CPLE6,EGIE3,ELET3,ENBR3,ENEV3,ENGI11,EQTL3,LIGT3,NEOE3,OMGE3,TAEE11,TRPL4">El&#xE9;tricas</option><option value="ET" data-load="false" data-acoes="BOVA11,BOVB11,BOVV11,BOVX11,BRAX11,GOLD11,IVVB11,NASD11,PIBB11,SMAL11,SPXI11,XBOV11">ETFs</option><option value="ML" selected="selected" data-load="false" data-acoes="ABEV3,ALOS3,AMBP3,ASAI3,AZZA3,B3SA3,BBAS3,BBDC3,BBDC4,BBSE3,BEEF3,BHIA3,BOVA11,BPAC11,BRAP4,BRAV3,BRKM5,BRSR6,CEAB3,CMIG4,CMIN3,COGN3,CSAN3,CSMG3,CSNA3,CVCB3,CXSE3,CYRE3,DIRR3,EGIE3,EMBJ3,ENEV3,EQTL3,EZTC3,GGBR4,GOAU4,HAPV3,HYPE3,IBOV11,IRBR3,ISAE4,ITSA4,ITUB4,JBSS32,JHSF3,KLBN11,LREN3,MBRF3,MGLU3,MOTV3,MRVE3,MULT3,NATU3,PCAR3,PETR3,PETR4,POMO4,POSI3,PRIO3,PSSA3,RADL3,RAIL3,RAIZ4,RAPT4,RDOR3,RECV3,RENT3,SANB11,SAPR11,SBSP3,SMAL11,SMTO3,SUZB3,TAEE11,TOTS3,UGPA3,USIM5,VALE3,VAMO3,VBBR3,VIVA3,WEGE3,XPBR31,YDUQ3">Mais l&#xED;quidos</option><option value="PV" data-load="false" data-acoes="PETR3,PETR4,VALE3">PETR e VALE</option><option value="PO" data-load="true" data-acoes="ABCB4,ABEV3,ALOS3,ALPA4,ALUP11,AMAR3,AMBP3,ANIM3,ARML3,ASAI3,AUAU99,AURE3,AXIA98,AZUL54,AZZA3,B3SA3,BBAS3,BBDC3,BBDC4,BBSE3,BEEF3,BHIA3,BMGB4,BMOB3,BOVA11,BOVV11,BPAC11,BPAN4,BRAP4,BRAV3,BRKM5,BRSR6,CAML3,CASH3,CBAV3,CEAB3,CMIG4,CMIN3,COGN3,CPFE3,CPLE3,CPLE99,CSAN3,CSMG3,CSNA3,CURY3,CVCB3,CXSE3,CYRE3,CYRE99,DASA3,DIRR3,DXCO3,ECOR3,EGIE3,EMBJ3,ENEV3,ENGI11,EQTL3,EVEN3,EZTC3,FESA4,FLRY3,GFSA3,GGBR4,GMAT3,GOAU4,GOLD11,GRND3,GUAR3,HAPV3,HBOR3,HYPE3,IGTI11,INTB3,IRBR3,ISAE4,ITSA4,ITUB4,IVVB11,JALL3,JHSF3,KEPL3,KLBN11,LEVE3,LJQQ3,LREN3,LWSA3,MBRF3,MDIA3,MGLU3,MOTV3,MOVI3,MRVE3,MULT3,MYPK3,NATU3,ODPV3,PCAR3,PETR3,PETR4,PLPL3,POMO4,POSI3,PRIO3,PSSA3,QUAL3,RADL3,RAIL3,RAIZ4,RANI3,RAPT4,RDOR3,RECV3,RENT3,RENT99,ROMI3,ROXO34,SANB11,SAPR11,SBFG3,SBSP3,SEER3,SIMH3,SLCE3,SMAL11,SMFT3,SMTO3,SOJA3,SUZB3,TAEE11,TASA4,TIMS3,TOKY3,TOTS3,TTEN3,TUPY3,UGPA3,UNIP6,USIM5,VALE3,VAMO3,VBBR3,VIVA3,VIVT3,VLID3,VULC3,VVEO3,WEGE3,WIZC3,YDUQ3">Pozinhos</option><option value="TA" data-load="false" data-acoes="A1MD34,AAPL34,ABCB4,ABEV3,AERI3,AGRO3,ALOS3,ALPA4,ALUP11,AMAR3,AMBP3,AMZO34,ANIM3,ARML3,ASAI3,AUAU3,AUAU99,AURA33,AURE3,AXIA3,AXIA6,AXIA98,AXIA99,AZUL54,AZZA3,B3SA3,BABA34,BBAS3,BBDC3,BBDC4,BBSE3,BEEF3,BERK34,BHIA3,BLAU3,BMGB4,BMOB3,BOVA11,BOVB11,BOVV11,BOVX11,BPAC11,BPAN4,BRAP4,BRAV3,BRAX11,BRKM5,BRSR6,CAML3,CASH3,CBAV3,CEAB3,CHVX34,CMIG3,CMIG4,CMIN3,COCA34,COGN3,CPFE3,CPLE3,CPLE99,CSAN3,CSMG3,CSNA3,CURY3,CVCB3,CXSE3,CYRE3,CYRE4,CYRE99,DASA3,DIRR3,DXCO3,E1MR34,ECOR3,EGIE3,EMBJ3,ENEV3,ENGI11,ENJU3,EQTL3,ESPA3,EVEN3,EXXO34,EZTC3,FESA4,FLRY3,GFSA3,GGBR4,GGPS3,GMAT3,GMCO34,GOAU4,GOGL34,GOLD11,GRND3,GSGI34,GUAR3,HAPV3,HBOR3,HBSA3,HYPE3,IBBR11,IBOV11,IFCM3,IGTI11,INBR32,INTB3,IRBR3,ISAE4,ITLC34,ITSA4,ITUB3,ITUB4,IVVB11,JALL3,JBSS32,JHSF3,JNJB34,JPMC34,KEPL3,KLBN11,LAVV3,LEVE3,LILY34,LJQQ3,LOGG3,LOGN3,LREN3,LWSA3,M1TA34,MATD3,MBRF3,MCDC34,MDIA3,MDNE3,MEAL3,MELI34,MGLU3,MILS3,MLAS3,MOTV3,MOVI3,MRVE3,MSFT34,MTRE3,MULT3,MYPK3,N1VO34,NASD11,NATU3,NEOE3,NFLX34,NVDC34,ODPV3,ONCO3,ORVR3,OXYP34,P1GR34,PAGS34,PCAR3,PETR3,PETR4,PGMN3,PIBB11,PLPL3,PNVL3,POMO4,POSI3,PRIO3,PSSA3,PTBL3,PYPL34,QUAL3,RADL3,RAIL3,RAIZ4,RANI3,RAPT4,RDOR3,RECV3,RENT3,RENT99,RIOT34,ROMI3,ROXO34,SANB11,SANB3,SANB99,SAPR11,SBFG3,SBSP3,SEER3,SEQL3,SIMH3,SIMN34,SLCE3,SMAL11,SMFT3,SMLL11,SMTO3,SOJA3,SPXI11,SRNA3,SUZB3,TAEE11,TASA4,TCSA3,TEND3,TIMS3,TMOS34,TOKY3,TOTS3,TRAD3,TRIS3,TSLA34,TSMC34,TTEN3,TUPY3,UGPA3,UNIP6,USIM5,VALE3,VAMO3,VAMO99,VBBR3,VERZ34,VISA34,VIVA3,VIVT3,VLID3,VULC3,VVEO3,VXBR11,WALM34,WEGE3,WIZC3,XBOV11,XPBR31,YDUQ3,ZAMP3">Todos ativos</option></select> <span> &nbsp;&nbsp; Ativo </span> <select name="IdAcao"><option></option><option value="ABEV3">ABEV3</option><option value="ALOS3">ALOS3</option><option value="AMBP3">AMBP3</option><option value="ASAI3">ASAI3</option><option value="AZZA3">AZZA3</option><option value="B3SA3">B3SA3</option><option value="BBAS3">BBAS3</option><option value="BBDC3">BBDC3</option><option value="BBDC4">BBDC4</option><option value="BBSE3">BBSE3</option><option value="BEEF3">BEEF3</option><option value="BHIA3">BHIA3</option><option value="BOVA11">BOVA11</option><option value="BPAC11">BPAC11</option><option value="BRAP4">BRAP4</option><option value="BRAV3">BRAV3</option><option value="BRKM5">BRKM5</option><option value="BRSR6">BRSR6</option><option value="CEAB3">CEAB3</option><option value="CMIG4">CMIG4</option><option value="CMIN3">CMIN3</option><option value="COGN3">COGN3</option><option value="CSAN3">CSAN3</option><option value="CSMG3">CSMG3</option><option value="CSNA3">CSNA3</option><option value="CVCB3">CVCB3</option><option value="CXSE3">CXSE3</option><option value="CYRE3">CYRE3</option><option value="DIRR3">DIRR3</option><option value="EGIE3">EGIE3</option><option value="EMBJ3">EMBJ3</option><option value="ENEV3">ENEV3</option><option value="EQTL3">EQTL3</option><option value="EZTC3">EZTC3</option><option value="GGBR4">GGBR4</option><option value="GOAU4">GOAU4</option><option value="HAPV3">HAPV3</option><option value="HYPE3">HYPE3</option><option value="IBOV11">IBOV11</option><option value="IRBR3">IRBR3</option><option value="ISAE4">ISAE4</option><option value="ITSA4">ITSA4</option><option value="ITUB4">ITUB4</option><option value="JBSS32">JBSS32</option><option value="JHSF3">JHSF3</option><option value="KLBN11">KLBN11</option><option value="LREN3">LREN3</option><option value="MBRF3">MBRF3</option><option value="MGLU3">MGLU3</option><option value="MOTV3">MOTV3</option><option value="MRVE3">MRVE3</option><option value="MULT3">MULT3</option><option value="NATU3">NATU3</option><option value="PCAR3">PCAR3</option><option value="PETR3">PETR3</option><option value="PETR4">PETR4</option><option value="POMO4">POMO4</option><option value="POSI3">POSI3</option><option value="PRIO3">PRIO3</option><option value="PSSA3">PSSA3</option><option value="RADL3">RADL3</option><option value="RAIL3">RAIL3</option><option value="RAIZ4">RAIZ4</option><option value="RAPT4">RAPT4</option><option value="RDOR3">RDOR3</option><option value="RECV3">RECV3</option><option value="RENT3">RENT3</option><option value="SANB11">SANB11</option><option value="SAPR11">SAPR11</option><option value="SBSP3">SBSP3</option><option value="SMAL11">SMAL11</option><option value="SMTO3">SMTO3</option><option value="SUZB3">SUZB3</option><option value="TAEE11">TAEE11</option><option value="TOTS3">TOTS3</option><option value="UGPA3">UGPA3</option><option value="USIM5">USIM5</option><option value="VALE3">VALE3</option><option value="VAMO3">VAMO3</option><option value="VBBR3">VBBR3</option><option value="VIVA3">VIVA3</option><option value="WEGE3">WEGE3</option><option value="XPBR31">XPBR31</option><option value="YDUQ3">YDUQ3</option></select><div class="cotDiv"><span class="cotItem cotPreco">R$ <input type="text" name="CotacaoAtivoBase" readonly="readonly"></span> <span class="cotItem cotVal">&nbsp;| &nbsp; </span> <span class="cotItem cotVar">&nbsp;</span> <span class="cotItem cotVal"> &nbsp; | &nbsp; </span> <span class="cotDataHora">&nbsp;</span></div></fieldset><fieldset style="height:85px;width:220px;float:left;margin-right:10px"><legend>Vencimentos</legend><div style="height:50px;overflow-y:auto;overflow-x:hidden"><ul id="listavencimentos" style="padding-left:0;margin:auto"></ul></div></fieldset><fieldset class="fSetLiquidez"><legend>Liquidez</legend><div>Negociadas<div class="divPortraitBreak"><input type="radio" name="ultNegociacao" id="ultimosDias" value="ultimosDias"><label for="ultimosDias">em algum dos últimos</label> <select id="qtdDias" name="qtdDias"><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option selected="selected">7</option><option>10</option><option>30</option><option>60</option><option>90</option></select> <label for="ultimosDias">dias</label></div>&nbsp; &nbsp; <input type="radio" name="ultNegociacao" id="todas" value="todas" checked="checked"><label for="todas">todas</label></div><div>Mínimo <input type="number" value="" step="1" min="0" id="minNegocios" name="minNegocios" style="width:60px;text-align:center" maxlength="5"> negócios &nbsp;&nbsp; | &nbsp;<div class="divPortraitBreak">volume financeiro R$ <input type="text" autocomplete="off" value="" id="minVolume" name="minVolume" style="width:90px;text-align:center" maxlength="10"></div></div></fieldset><div id="fb-root"></div><script>window.fbAsyncInit=function(){FB.init({appId:'223219718581038',autoLogAppEvents:true,xfbml:true,version:'v10.0'});};</script><script async="async" defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/pt_BR/sdk.js"></script><fieldset class="fSetSocial" style=";margin-top:8px"><div class="fb-share-button bottom-buffer-20" data-href="https://opcoes.net.br/opcoes2/bovespa" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fopcoes.net.br%2Fopcoes2%2Fbovespa&amp;src=sdkpreparse">Compartilhar</a></div><br></fieldset><fieldset class="fSetDistanciaStrike" style="float:left"><legend>Distância do strike</legend><ul class="list-inline"><li><input type="checkbox" name="moneynessRanges" value="ITM_acima_de_15" id="ITM_acima_de_15"><label for="ITM_acima_de_15">ITM acima de 15%</label></li><li><input type="checkbox" name="moneynessRanges" value="ITM_entre_5_e_15" id="ITM_entre_5_e_15"><label for="ITM_entre_5_e_15">ITM entre 5% e 15%</label></li><li><input type="checkbox" name="moneynessRanges" value="ATM_entre_5_e_5" id="ATM_entre_5_e_5" checked="checked"><label for="ATM_entre_5_e_5">Entre -5% e +5%</label></li><li><input type="checkbox" name="moneynessRanges" value="OTM_entre_5_e_15" id="OTM_entre_5_e_15"><label for="OTM_entre_5_e_15">OTM entre 5% e 15%</label></li><li><input type="checkbox" name="moneynessRanges" value="OTM_acima_de_15" id="OTM_acima_de_15"><label for="OTM_acima_de_15">OTM acima de 15%</label></li></ul></fieldset></div></div><div class="modal-body"><table id="tblListaOpc" class="dataTable compact stripe hover"></table></div><div class="modal-footer"></div><script src="/js/datatables.min.js?v=20260105"></script><script src="/js/dts-charts-utls.js?v=20260105"></script><script src="/js/datatables.customsorting.quotedate.js?v=20260105"></script><script src="/js/ui-bundle-after.js?v=PeIxymmRJRw4oMUcQokJn9_7FyQ"></script><script src="/js/quotesSrvc.js"></script><script>var idxColUltimo,idxColVar,idxColMoneyness,idxColDistanciaStrike,idxColRK5,idxColRK6,idxColRK7,idxColRK8,idxColOfertaDeCompra,idxColOfertaDeVenda,idxColVolume,idxColDataHora,idxColNumNegocios,idxColTipo,idxColStrike,idxColIVA,idxColIVB,idxColVolatilidade,idxColDelta,idxColGamma,idxPremioComoPercentual,idxColTheta,idxColVega,idxsColsWithFilter,idxsColsWithTooltip,colsTooltipsDict;var dtTblListaOpc=null;var dataTableSubscription=null;function atualizarVencimentos(elId,vencimentos){var $ul=$('#'+elId);$ul.empty();$(vencimentos).each(function(idx,v){var html='<li><input type="checkbox" name="vencimentos" value="'+v.value+'" id="v'+v.value+'" ';if(v.selected){html+='checked="checked"';}
html+=' /><label for="v'+v.value+'" ';if(v['dataAttributes']&&v['dataAttributes']['m']=='1'){html+='title="Vencimento mensal"';}else{html+='title="Vencimento semanal"';}
html+='>';if(v['dataAttributes']&&v['dataAttributes']['m']=='1'){html+='<b>';}
html+=v.text;if(v['dataAttributes']){if(v['dataAttributes']['w']){html+=' - '+v['dataAttributes']['w'];}
if(v['dataAttributes']['du']){html+=' - '+v['dataAttributes']['du']+' d.u.';}}
if(v['dataAttributes']&&v['dataAttributes']['m']=='1'){html+='</b>';}
html+='</label>';html+='</li>';$ul.append(html);});}
var today=mUtils.today();$.fn.dataTable.ext.search.push(function(settings,data,dataIndex){var ultNegociacao=$('input[name="ultNegociacao"]:checked').val();var strDataCotacao=data[idxColDataHora];var minNegocios=parseInt($('#minNegocios').val(),10);var numNeg=data[idxColNumNegocios]||0;if(!isNaN(minNegocios)&&!isNaN(numNeg)&&numNeg<minNegocios){return false;}
var minVolume=mUtils.parseNumber($('#minVolume').val());var volume=mUtils.parseNumber(data[idxColVolume]);if(!isNaN(minVolume)&&!isNaN(volume)&&volume<minVolume){return false;}
var moneynessRanges=$('input[name="moneynessRanges"]:checked').map(function(){return this.value;}).get();if(!moneynessRanges||moneynessRanges.length==0){return false;}
var tipo=data[idxColTipo];var distanciaStrike=mUtils.parseNumber(data[idxColDistanciaStrike]);var strikeInRange=false;for(var i=0;i<moneynessRanges.length;i++){switch(moneynessRanges[i]){case'ITM_acima_de_15':strikeInRange=strikeInRange||(tipo=='CALL'&&distanciaStrike<-15)||(tipo=='PUT'&&distanciaStrike>15);break;case'ITM_entre_5_e_15':strikeInRange=strikeInRange||(tipo=='CALL'&&distanciaStrike>=-15&&distanciaStrike<-5)||(tipo=='PUT'&&distanciaStrike>5&&distanciaStrike<=15);break;case'ATM_entre_5_e_5':strikeInRange=strikeInRange||(distanciaStrike>=-5&&distanciaStrike<=5);break;case'ATM_entre_3_e_3':strikeInRange=strikeInRange||(distanciaStrike>=-3&&distanciaStrike<=3);break;case'ATM_entre_2_e_2':strikeInRange=strikeInRange||(distanciaStrike>=-2&&distanciaStrike<=2);break;case'ATM_entre_1_e_1':strikeInRange=strikeInRange||(distanciaStrike>=-1&&distanciaStrike<=1);break;case'OTM_entre_5_e_15':strikeInRange=strikeInRange||(tipo=='CALL'&&distanciaStrike>5&&distanciaStrike<=15)||(tipo=='PUT'&&distanciaStrike>=-15&&distanciaStrike<-5);break;case'OTM_acima_de_15':strikeInRange=strikeInRange||(tipo=='CALL'&&distanciaStrike>15)||(tipo=='PUT'&&distanciaStrike<-15);break;}}
if(!strikeInRange){return false;}
if(ultNegociacao=='hoje'){if(!strDataCotacao)return true;var dataCotacao=mUtils.parseDateTime(strDataCotacao);if(mUtils.dateIsOlder(dataCotacao,today))return false;}else if(ultNegociacao=='ultimosDias'){if(!strDataCotacao)return true;var qtdDias=parseInt($('#qtdDias').val());var refDate=mUtils.today();refDate.setDate(refDate.getDate()-qtdDias+1);var dataCotacao=mUtils.parseDateTime(strDataCotacao);if(mUtils.dateIsOlder(dataCotacao,refDate))return false;}
return true;});function atualizarAcoes(acoes,$parent){var $select=$parent.find('select[name="IdAcao"]');var acaoSelecionada=$select.val();var options=$.map(acoes,function(a){return{value:a,text:a};});mUtils.updateSelectOptions($select,options,true,'text');if(acoes.indexOf(acaoSelecionada)==-1){clearCotacao();clearGrid(true);acaoUpdated('');}}
function atualizarDistanciaStrikeEPremioComoPercentual(data,callback){if(cotAcaoSubscription.lastPrice==null){console.log('Aguardando cotAcaoSubscription.lastPrice ser definido... ')
setTimeout(atualizarDistanciaStrikeEPremioComoPercentual,1000,data,callback);return;}
for(var i=0;i<data.cotacoesOpcoes.length;i++){if(data.cotacoesOpcoes[i][idxColDistanciaStrike]==null){data.cotacoesOpcoes[i][idxColDistanciaStrike]=(data.cotacoesOpcoes[i][idxColStrike]-cotAcaoSubscription.lastPrice)*100/cotAcaoSubscription.lastPrice;}
if(data.cotacoesOpcoes[i][idxPremioComoPercentual]==null&&data.cotacoesOpcoes[i][idxColUltimo]!=null){data.cotacoesOpcoes[i][idxPremioComoPercentual]=data.cotacoesOpcoes[i][idxColUltimo]*100/cotAcaoSubscription.lastPrice;}}
if(callback){callback();}}
$(document).on('change','select[name="IdLista"]',function(){var select=this;var $select=$(this);var $parent=$select.parents('fieldset').first();var idLista=$select.val();var $selectedOption=$select.find('option:selected');if($selectedOption.val()=='PO'){document.location.href='/opcoes/pozinhos';return;}else if($selectedOption.val()=='ST'){$('input[name="moneynessRanges"]').prop('checked',false);$('input[name="moneynessRanges"][value="ATM_entre_2_e_2"]').prop('checked',true);}else{$('input[name="moneynessRanges"]').prop('checked',false);$('input[name="moneynessRanges"][value="ATM_entre_5_e_5"]').prop('checked',true);}
var acoes=$selectedOption.data('acoes');var load=$selectedOption.data('load');if(!acoes){clearCotacao();clearGrid(true);}else{var acaoSelecionada=$parent.find('select[name="IdAcao"]').val();var arr=acoes.split(',').map(val=>val?val.trim():val);atualizarAcoes(arr,$parent);if(arr.indexOf(acaoSelecionada)>=0){var vencimentos=$('input[name="vencimentos"]:checked').map(function(){return this.value;}).get();updateGrid($parent,false,false,vencimentos);}else{clearCotacao();}}
if(load){updateGrid($parent,!acoes,true);}});$('#minNegocios,#minVolume').on('change keyup',function(){if(dtTblListaOpc){dtTblListaOpc.draw(false);var ativos2=groupByAcao(dtTblListaOpc.rows({filter:'applied'}).data());quotesSrvc.setNeededQuotes(dataTableSubscription,ativos2);}});$('input[name="ultNegociacao"]').on('click',function(){if(dtTblListaOpc){dtTblListaOpc.draw(false);var ativos2=groupByAcao(dtTblListaOpc.rows({filter:'applied'}).data());quotesSrvc.setNeededQuotes(dataTableSubscription,ativos2);}});$('#qtdDias').on('change',function(){if(dtTblListaOpc&&$('input[name="ultNegociacao"]:checked').val()=='ultimosDias'){dtTblListaOpc.draw(false);var ativos2=groupByAcao(dtTblListaOpc.rows({filter:'applied'}).data());quotesSrvc.setNeededQuotes(dataTableSubscription,ativos2);}});$('input[name="moneynessRanges"]').on('click',function(){if(dtTblListaOpc){dtTblListaOpc.draw(false);var ativos2=groupByAcao(dtTblListaOpc.rows({filter:'applied'}).data());quotesSrvc.setNeededQuotes(dataTableSubscription,ativos2);}});function updateFiltersOptions(columnsWithFilters){columnsWithFilters=columnsWithFilters||dtTblListaOpc.columns(idxsColsWithFilter);columnsWithFilters.every(function(){var uniqueItemsSorted;var column=this;var uniqueItems=column.nodes().to$().map(function(){return $(this).html().trim();}).get().filter(mUtils.uniqueValuesAndRefs);if(uniqueItems.every(mUtils.brFormattedNumber)){uniqueItemsSorted=uniqueItems.sort(fmtNumberCompare);}else{uniqueItemsSorted=uniqueItems.sort();}
var $select=$(dtTblListaOpc.table().header()).find('select[data-dtcolindex="'+column.index()+'"]');var optionValues=$select.children().map(function(){if(this.value)
return this.value;else
return null;}).get();if(mUtils.deepCompare(optionValues,uniqueItemsSorted)){return;}
$select.empty();$select.append('<option value=""></option>');$.each(uniqueItemsSorted,function(idx,val){if(val){$select.append('<option value="'+val+'">'+val+'</option>');}});});}
function updateTableRow($tr,idAtivo,book,dataVolGregas){var prefix=idAtivo.substr(0,4);var opid=idAtivo.substring(4,idAtivo.indexOf('_'));$tr.find('span.atprefix').text(prefix);var $input=$tr.find('input[name$="TickerSuffix"]');$input.val(opid);$input.trigger('change');$tr.find('[name$="IdAtivo"]').val(idAtivo);$tr.find('input[name$="Compra"]').val(renderNumberWithTwoDecimals(book[0]));$tr.find('input[name$="Ultimo"]').val(renderNumberWithTwoDecimals(book[1]));$tr.find('input[name$="Venda"]').val(renderNumberWithTwoDecimals(book[2]));var $cols=$tr.children();var col=$cols.length-1;for(var i=dataVolGregas.length-1;i>=0;i--,col--){if(i==0)
$($cols[col]).text(dataVolGregas[i]);else if(i==1)
$($cols[col]).text(renderNumberWithTwoDecimals(dataVolGregas[i]));else
$($cols[col]).text(renderNumberWithFourDecimals(dataVolGregas[i]));}}
function extractTickerFromIdAtivo(idAtivo){return idAtivo.substr(0,idAtivo.indexOf('_'));}
function clearCotacao(){$('span.cotPreco').css('color','inherit');$('input[name="CotacaoAtivoBase"]').val('');$('span.cotVar').html('&nbsp;').css('color','inherit');$('span.cotDataHora').html('&nbsp;');$('input[name="PrecoReferencia"]').val('');}
function clearGrid(draw){if(dtTblListaOpc){dtTblListaOpc.clear();dtTblListaOpc.columns(idxsColsWithFilter).search('');quotesSrvc.setNeededQuotes(dataTableSubscription,[]);if(draw){dtTblListaOpc.draw(false);}
$('.dataTables_info').html('');}}
function showMessage(message,kind){var $divButtons=$('div.dt-buttons');$divButtons.find('span.label').remove();$divButtons.prepend('<span class="label label-'+kind+'">'+message+'</span>');}
function updateCell(newData,newDataColKey,row,curDataColIdx,blink,setColor){var color;if(curDataColIdx<0){return;}
var d=row.data();var oldVal=d[curDataColIdx];if((oldVal===null&&newData[newDataColKey]!==null)||(oldVal!==null&&newData[newDataColKey]===null)||newData[newDataColKey]!==oldVal){if(newData[newDataColKey]||newData[newDataColKey]===null)
d[curDataColIdx]=newData[newDataColKey];else if(typeof d[curDataColIdx]==='undefined'){console.log('row '+row[0]+' column '+curDataColIdx+' is undefined!');d[curDataColIdx]=null;}
var cell=dtTblListaOpc.cell(row.index(),curDataColIdx);cell.invalidate();var $node=$(cell.node());if(setColor&&newData[newDataColKey]){var value=mUtils.parseNumber(newData[newDataColKey]);if(value>0)
color='green';else if(value<0)
color='red';else
color='inherit';$node.css('color',color);}
if(blink&&oldVal&&newData[newDataColKey]){color=mUtils.parseNumber(newData[newDataColKey])>oldVal?'blue':'red';var cssClass='blink'+color;$node.addClass(cssClass);window.setTimeout(function($node,cssClass){$node.removeClass(cssClass);},500,$node,cssClass);}}}
var realTimeSrvc=null;var quotesSrvc=createQuotesService(realTimeSrvc,false);var cotAcaoSubscription=function(){var selector='select[name="IdAcao"]',id=selector,lastPrice=null,updateQuotes=function(quotes){var color='';var idAcao=$(selector).val();if(quotes[idAcao]){if(quotes[idAcao]['VAR']){var variacao=mUtils.parseNumber(quotes[idAcao]['VAR']);if(variacao>0)
color='limegreen';else if(variacao<0)
color='red';$('span.cotVar').html(renderNumberWithTwoDecimals(quotes[idAcao]['VAR'])+'%');if(color)
$('span.cotVar').css('color',color);else
$('span.cotVar').css('color','inherit');}
if(quotes[idAcao]['ULT']){cotAcaoSubscription.lastPrice=quotes[idAcao]['ULT'];$('input[name="CotacaoAtivoBase"]').val(renderNumberWithTwoDecimals(quotes[idAcao]['ULT']));if(color)
$('span.cotPreco').css('color',color);else
$('span.cotPreco').css('color','inherit');}
if(quotes[idAcao]['HOR']){$('span.cotDataHora').html(quotes[idAcao]['HOR']);}
if(dtTblListaOpc&&idxColMoneyness>=0){var columnsWithFilters=dtTblListaOpc.columns([idxColMoneyness]);updateFiltersOptions(columnsWithFilters);}}},getNeededQuotes=function(){var idAcao=$(selector).val();if(idAcao){var ativos={};ativos[idAcao]=[];return ativos;}else{return{};}};return{id:id,lastPrice:lastPrice,updateQuotes:updateQuotes,getNeededQuotes:getNeededQuotes};}();$('select[name="IdAcao"]').change(function(){var select=this;var idAcao=this.value;$('select[name="IdAcao"]').each(function(){if(this!=select){$(this).val(idAcao);}});clearCotacao();cotAcaoSubscription.lastPrice=null;quotesSrvc.setNeededQuotes(cotAcaoSubscription,cotAcaoSubscription.getNeededQuotes());});quotesSrvc.subscribe(cotAcaoSubscription);quotesSrvc.setNeededQuotes(cotAcaoSubscription,cotAcaoSubscription.getNeededQuotes(),true);function hasBookRecentPricesAndMaxSpread(selectedRow,maxSpread){var strDataCotacao=selectedRow[idxColDataHora];if(!strDataCotacao)return false;var dataCotacao=mUtils.parseDateTime(strDataCotacao);if(!mUtils.dateIsOlder(dataCotacao,mUtils.today()))return false;var ultimo=selectedRow[idxColUltimo];var compra=selectedRow[idxColOfertaDeCompra];var venda=selectedRow[idxColOfertaDeVenda];return(ultimo&&compra&&venda&&Math.abs(ultimo-compra)<=maxSpread&&Math.abs(ultimo-venda)<=maxSpread);}
function groupByAcao(rowsData){var list=rowsData.map(function(val,idx){return[val[0].substr(0,val[0].indexOf('_')),val[val.length-1]];});var ativos=list.reduce(function(accumul,curVal){var acao=curVal[1];var opcao=curVal[0];if(!accumul[acao]){accumul[acao]=[];}
accumul[acao].push(opcao);return accumul;},{});return ativos;}
function findColIndex(columns,title){var filteredRows=$.grep(columns,function(col){return col.title==title;});if(filteredRows.length<1){return-1;}else{return filteredRows[0].index;}}
function setColIndexes(data){idxColUltimo=findColIndex(data.columns,'Último');idxColVar=findColIndex(data.columns,'Var. %');idxColMoneyness=findColIndex(data.columns,'A/I/OTM');idxColDistanciaStrike=findColIndex(data.columns,'Distância % do Strike');idxPremioComoPercentual=findColIndex(data.columns,'Prêmio como % da última cotação');idxColRK5=findColIndex(data.columns,'RK5');idxColRK6=findColIndex(data.columns,'RK6');idxColRK7=findColIndex(data.columns,'RK7');idxColRK8=findColIndex(data.columns,'RK8');idxColOfertaDeCompra=findColIndex(data.columns,'Bid');idxColOfertaDeVenda=findColIndex(data.columns,'Ask');idxColVolume=findColIndex(data.columns,'Volume Negociado');idxColDataHora=findColIndex(data.columns,'Data/Hora');idxColNumNegocios=findColIndex(data.columns,'Número de Negócios');idxColTipo=findColIndex(data.columns,'Tipo');idxColStrike=findColIndex(data.columns,'Strike');idxColIVA=findColIndex(data.columns,'Vol. Impl. Ask');idxColIVB=findColIndex(data.columns,'Vol. Impl. Bid');idxColVolatilidade=findColIndex(data.columns,'Vol. Implícita');idxColDelta=findColIndex(data.columns,'Delta');idxColGamma=findColIndex(data.columns,'Gamma');idxColTheta=findColIndex(data.columns,'Theta');idxColVega=findColIndex(data.columns,'Vega');idxColIdAcao=findColIndex(data.columns,'IdAcao');idxsColsWithFilter=$.map($.grep(data.columns,function(col){return col.createFilter;}),function(col){return col.index;});idxsColsWithTooltip=$.map($.grep(data.columns,function(col){return col.tooltip;}),function(col){return col.index;});}
function initDataTable(data,initCompleted){dtTblListaOpc=$('#tblListaOpc').DataTable({autoWidth:false,layout:{topStart:'info',topEnd:'buttons',bottomStart:null,bottomEnd:null},info:true,paging:false,order:[[5,'asc']],fixedHeader:{headerOffset:50},data:data.cotacoesOpcoes,columns:data.columns,columnDefs:JSON.parse(data.columnDefs,function(k,v){if(k==='render'){return window[v];}else{return v;}}),buttons:[],language:{url:'/js/Grid-Opcoes-Portuguese-Brasil.json',buttons:{copy:'Copiar tabela',excel:'Exportar para Excel'},select:{rows:{_:'%d selecionadas',0:'',1:'1 selecionada'}}},drawCallback:function(){$('img[src="/images/volblur.png"]').attr('title','Para visualizar esses dados você precisa efetuar login');},rowCallback:function(row,data,index){if(idxColVar<0)return;if(data[idxColVar]>0){$(row).find('td:eq('+idxColVar+')').css('color','green');}else if(data[idxColVar]<0){$(row).find('td:eq('+idxColVar+')').css('color','red');}else{$(row).find('td:eq('+idxColVar+')').css('color','inherit');}},initComplete:function(){var tbl=this;idxsColsWithTooltip.forEach(function(colIdx){var column=tbl.api().column(colIdx);var tooltip=colsTooltipsDict[colIdx.toString()];var $th=$(column.header());$th.attr('title',tooltip);});var $thead=$(this.api().table().header());var $newHeaderRow=$('<tr role="row">');$newHeaderRow.appendTo($thead);var filteredColIndexes=[];var columnsWithFilters=this.api().columns(idxsColsWithFilter);columnsWithFilters.every(function(){var column=this;filteredColIndexes.push(column.index());var $newTh=$('<th>')
$newTh.appendTo($newHeaderRow);var $select=$('<select data-dtcolindex="'+column.index()+'"></select>').appendTo($newTh).on('change',function(){var val=$(this).val();column.search(val?'^'+val+'$':'',true,false).draw(false);});});updateFiltersOptions(columnsWithFilters);var allColumns=this.api().columns();allColumns.every(function(){var column=this;if(filteredColIndexes.indexOf(column.index())==-1){$(column.header()).attr('rowspan',2);}});dataTableSubscription={id:'dtTblListaOpc',updateStatus:showMessage,moneynessFilterInitialized:false,lastRedraw:null,updateQuotes:function(quotes){if(!dtTblListaOpc)return;var curDate=new Date();var blinkIfQuoteIsLessThan=30000;dtTblListaOpc.rows().every(function(){var row=this;var d=row.data();var ticker=d[0].substr(0,d[0].indexOf('_'));if(quotes[ticker]){updateCell(quotes[ticker],'AIO',row,idxColMoneyness,false);if(cotAcaoSubscription.lastPrice!=null){}else{updateCell(quotes[ticker],'DTS',row,idxColDistanciaStrike,false);updateCell(quotes[ticker],'PCP',row,idxPremioComoPercentual,false);}
var cotacaoAcao=null;if(quotes[d[idxColIdAcao]]&&quotes[d[idxColIdAcao]]['ULT'])
cotacaoAcao=quotes[d[idxColIdAcao]]['ULT'];else if(cotAcaoSubscription.lastPrice)
cotacaoAcao=cotAcaoSubscription.lastPrice;if(cotacaoAcao){d[idxColDistanciaStrike]=(d[idxColStrike]-cotacaoAcao)*100/cotacaoAcao;var cell=dtTblListaOpc.cell(row.index(),idxColDistanciaStrike);cell.invalidate();if(quotes[ticker]&&quotes[ticker]['ULT']){d[idxPremioComoPercentual]=quotes[ticker]['ULT']*100/cotacaoAcao;cell=dtTblListaOpc.cell(row.index(),idxPremioComoPercentual);cell.invalidate();}}
updateCell(quotes[ticker],'RK5',row,idxColRK5,false);updateCell(quotes[ticker],'RK6',row,idxColRK6,false);updateCell(quotes[ticker],'RK7',row,idxColRK7,false);updateCell(quotes[ticker],'RK8',row,idxColRK8,false);updateCell(quotes[ticker],'OCP',row,idxColOfertaDeCompra,true);updateCell(quotes[ticker],'ULT',row,idxColUltimo,true);updateCell(quotes[ticker],'VAR',row,idxColVar,true,true);updateCell(quotes[ticker],'OVD',row,idxColOfertaDeVenda,true);updateCell(quotes[ticker],'HOR',row,idxColDataHora,false);updateCell(quotes[ticker],'NEG',row,idxColNumNegocios,false);updateCell(quotes[ticker],'VFT',row,idxColVolume,false);updateCell(quotes[ticker],'IVA',row,idxColIVA,false);updateCell(quotes[ticker],'IVB',row,idxColIVB,false);updateCell(quotes[ticker],'VOL',row,idxColVolatilidade,false);updateCell(quotes[ticker],'DEL',row,idxColDelta,false);updateCell(quotes[ticker],'GAM',row,idxColGamma,false);updateCell(quotes[ticker],'THE',row,idxColTheta,false);updateCell(quotes[ticker],'VEG',row,idxColVega,false);}});if(idxColMoneyness>=0&&!dataTableSubscription.moneynessFilterInitialized){updateFiltersOptions(dtTblListaOpc.columns([idxColMoneyness]));dataTableSubscription.moneynessFilterInitialized=true;}
var now=new Date();if((dataTableSubscription.lastRedraw==null||(now.getTime()-dataTableSubscription.lastRedraw.getTime())>5000)&&($('input[name="ultNegociacao"]:checked').val()!='todas'||dtTblListaOpc.order().some(function(val,idx){return val[0]==idxColDataHora;}))){dtTblListaOpc.draw(false);dataTableSubscription.lastRedraw=new Date();}},updateNeededQuotes:function(){var ativos={};var acaoSelecionada=$('select[name="IdAcao"]').val();if(acaoSelecionada){var list=dtTblListaOpc.column(0).data().map(function(val,idx){return val.substr(0,val.indexOf('_'));}).toArray();ativos[acaoSelecionada]=list;quotesSrvc.setNeededQuotes(dataTableSubscription,ativos);}else{var rowsData=dtTblListaOpc.rows().data();var ativos=groupByAcao(rowsData)
quotesSrvc.setNeededQuotes(dataTableSubscription,ativos);}}};quotesSrvc.subscribe(dataTableSubscription);if(initCompleted){initCompleted();}}});dtTblListaOpc.on('select deselect',function(){var anySelected=dtTblListaOpc.rows({selected:true}).count()>0;dtTblListaOpc.buttons('.enabledifanyrowselected').enable(anySelected);});}
function showNewData(){dtTblListaOpc.draw(false);updateFiltersOptions();var ativos2=groupByAcao(dtTblListaOpc.rows({filter:'applied'}).data());quotesSrvc.setNeededQuotes(dataTableSubscription,ativos2);}
function updateGrid($parent,atualizarListaDeAcoes,listarVencimentos,vencimentos){var $lista=$parent.find('select[name="IdLista"]').last();var $selectedOption=$lista.find('option:selected');var lista={id:$lista.val(),description:$selectedOption.text(),load:$selectedOption.data('load')};var idAcao=$parent.find('select[name="IdAcao"]').val();clearGrid(true);if((!lista.load&&!idAcao)||(!listarVencimentos&&vencimentos&&vencimentos.length==0)){if(dataTableSubscription){quotesSrvc.setNeededQuotes(dataTableSubscription,{});}
return;}
$('.dataTables_info').html('Carregando...');var now=new Date();var invalidateCacheEveryFiveMinutes=now.getFullYear().toString()+'-'+(now.getMonth()+1).toString()+'-'+now.getDate().toString()+'_'+now.getHours().toString()+'h'+Math.floor(now.getMinutes()/5).toString();var query='cache='+invalidateCacheEveryFiveMinutes+'&au=False&uinhc=0&idLista='+lista.id+'&idAcao='+idAcao;query+='&listarVencimentos=';if(listarVencimentos){query+='true';}else{query+='false';}
query+='&cotacoes=';query+='true';if(vencimentos&&vencimentos.length>0){query+='&vencimentos='+vencimentos.join(',');}
$.ajax({type:'GET',url:'/listaopcoes/completa',data:query,error:function(req,status,error){var msg='Falha ao tentar recuperar lista de opções de '+(idAcao||lista.description)+'.';if(req.status==0)
msg+='\nPor favor verifique sua conexão com a internet.';else if(req.status==200)
msg+='\n'+status+' ';else
msg+='\n'+req.status+' '+req.statusText;alert(msg);},complete:function(req,textStatus){},success:function(response){if(response.success){setColIndexes(response.data);for(var i=0;i<response.data.cotacoesOpcoes.length;i++){response.data.cotacoesOpcoes[i][idxColDistanciaStrike]=response.data.cotacoesOpcoes[i][idxColDistanciaStrike];response.data.cotacoesOpcoes[i][idxPremioComoPercentual]=response.data.cotacoesOpcoes[i][idxPremioComoPercentual];}
if(listarVencimentos){atualizarVencimentos('listavencimentos',response.data.vencimentos);}
if(atualizarListaDeAcoes&&response.data.acoes){atualizarAcoes(response.data.acoes);}
var ativos=groupByAcao(response.data.cotacoesOpcoes);if(dtTblListaOpc){if($('select[name="IdAcao"]').val()&&false){atualizarDistanciaStrikeEPremioComoPercentual(response.data,function(){dtTblListaOpc.rows.add(response.data.cotacoesOpcoes);showNewData();showMessage('<strong>ATENÇÃO:</strong> Cotações em tempo real disponíveis apenas <a style="color: white; text-decoration: underline" href="/opcoes/bovespa">na nova interface</a>','danger');});}else{dtTblListaOpc.rows.add(response.data.cotacoesOpcoes);showNewData();showMessage('<strong>ATENÇÃO:</strong> Você está visualizando as cotações de fechamento do pregão anterior. Agora o Opções.Net.Br possui <a style="color: white; text-decoration: underline" target="_blank" href="/tempo-real">cotações em tempo real</a>.','danger');}}
else{colsTooltipsDict={};idxsColsWithTooltip.forEach(function(colIdx){colsTooltipsDict[colIdx.toString()]=response.data.columns[colIdx].tooltip;});if($('select[name="IdAcao"]').val()&&false){atualizarDistanciaStrikeEPremioComoPercentual(response.data,function(){initDataTable(response.data,function(){showNewData();showMessage('<strong>ATENÇÃO:</strong> Cotações em tempo real disponíveis apenas <a style="color: white; text-decoration: underline" href="/opcoes/bovespa">na nova interface</a>','danger');});});}else{initDataTable(response.data,function(){showNewData();showMessage('<strong>ATENÇÃO:</strong> Você está visualizando as cotações de fechamento do pregão anterior. Agora o Opções.Net.Br possui <a style="color: white; text-decoration: underline" target="_blank" href="/tempo-real">cotações em tempo real</a>.','danger');});}}}}});}
$('select[name="IdAcao"]').change(function(){$('select[data-dtcolindex]').val('');acaoChanged(this);});$(document).on('click','input[name="vencimentos"]',function(){$('select[data-dtcolindex]').val('');var vencimentos=$('input[name="vencimentos"]:checked').map(function(){return this.value;}).get();updateGrid($('.modal-title'),false,false,vencimentos);});</script><script>if($('select[name="IdAcao"]').val()!=''){updateGrid($('.modal-title'),false,true);}</script></div><div class="container-fluid footer"><div class="row"><div class="col-xs-6 col-sm-offset-1 col-sm-4">Copyright: <a target="_blank" href="https://opcoes.net.br"> Opções.Net.Br </a></div><div id="contato" class="col-xs-6 col-sm-3"></div><div class="col-xs-12 col-sm-4"><a target="_blank" href="/v1/termos-de-uso">Termos de uso</a> &nbsp; - &nbsp; <a target="_blank" href="/v1/politica-de-privacidade">Política de privacidade</a></div></div></div><script>var divId='contato';document.getElementById(divId).innerHTML=divId+'&#x40;'+document.domain;</script><script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js" src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js" crossorigin="anonymous" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"></script><script>(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.modal||document.write("\u003Cscript src=\u0022/lib/bootstrap/dist/js/bootstrap.min.js\u0022 src=\u0022/lib/bootstrap/dist/js/bootstrap.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\u0022\u003E\u003C/script\u003E"));</script></body></html>